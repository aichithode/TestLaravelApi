var $table=$("#table"),$remove=$("#remove"),selections=[];function initTable(){$table.bootstrapTable({height:getHeight(),columns:[[{field:"state",checkbox:true,rowspan:2,align:"center",valign:"middle"},{title:"Item ID",field:"id",rowspan:2,align:"center",valign:"middle",sortable:true,footerFormatter:totalTextFormatter},{title:"Item Detail",colspan:3,align:"center"}],[{field:"name",title:"Item Name",sortable:true,editable:true,footerFormatter:totalNameFormatter,align:"center"},{field:"price",title:"Item Price",sortable:true,align:"center",editable:{type:"text",title:"Item Price",validate:function(c){c=$.trim(c);if(!c){return"This field is required"}if(!/^$/.test(c)){return"This field needs to start width $."}var b=$table.bootstrapTable("getData"),a=$(this).parents("tr").data("index");console.log(b[a]);return""}},footerFormatter:totalPriceFormatter},{field:"operate",title:"Item Operate",align:"center",events:operateEvents,formatter:operateFormatter}]]});setTimeout(function(){$table.bootstrapTable("resetView")},200);$table.on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table",function(){$remove.prop("disabled",!$table.bootstrapTable("getSelections").length);selections=getIdSelections()});$table.on("expand-row.bs.table",function(c,a,d,b){if(a%2==1){b.html("Loading from ajax request...");$.get("LICENSE",function(e){b.html(e.replace(/\n/g,"<br>"))})}});$table.on("all.bs.table",function(c,b,a){console.log(b,a)});$remove.click(function(){var a=getIdSelections();$table.bootstrapTable("remove",{field:"id",values:a});$remove.prop("disabled",true)});$(window).resize(function(){$table.bootstrapTable("resetView",{height:getHeight()})})}function getIdSelections(){return $.map($table.bootstrapTable("getSelections"),function(a){return a.id})}function responseHandler(a){$.each(a.rows,function(b,c){c.state=$.inArray(c.id,selections)!==-1});return a}function detailFormatter(a,c){var b=[];$.each(c,function(d,e){b.push("<p><b>"+d+":</b> "+e+"</p>")});return b.join("")}function operateFormatter(b,c,a){return['<a class="like" href="javascript:void(0)" title="Like">','<i class="glyphicon glyphicon-heart"></i>',"</a>  ",'<a class="remove" href="javascript:void(0)" title="Remove">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")}window.operateEvents={"click .like":function(c,b,d,a){alert("You click like action, row: "+JSON.stringify(d))},"click .remove":function(c,b,d,a){$table.bootstrapTable("remove",{field:"id",values:[d.id]})}};function totalTextFormatter(a){return"Total"}function totalNameFormatter(a){return a.length}function totalPriceFormatter(b){var a=0;$.each(b,function(c,d){a+=+(d.price.substring(1))});return"$"+a}function getHeight(){return $(window).height()-$("h1").outerHeight(true)}$(function(){var b=[location.search.substring(1)||"assets/bootstrap-table/src/bootstrap-table.js","assets/bootstrap-table/src/extensions/export/bootstrap-table-export.js","http://rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js","assets/bootstrap-table/src/extensions/editable/bootstrap-table-editable.js","http://rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/js/bootstrap-editable.js"],a=function(c,f,g){g=g||function(){};if(!c.length){return g()}var e=0;var d=function(){f(c[e],function(h){if(h){g(h);g=function(){}}else{e+=1;if(e>=c.length){g(null)}else{d()}}})};d()};a(b,getScript,initTable)});function getScript(c,e){var d=document.getElementsByTagName("head")[0];var b=document.createElement("script");b.src=c;var a=false;b.onload=b.onreadystatechange=function(){if(!a&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){a=true;if(e){e()}b.onload=b.onreadystatechange=null}};d.appendChild(b);return undefined};