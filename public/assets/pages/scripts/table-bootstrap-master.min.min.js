var $table=$("#table"),$remove=$("#remove"),selections=[];function initTable(){$table.bootstrapTable({height:getHeight(),columns:[[{field:"state",checkbox:true,rowspan:2,align:"center",valign:"middle"},{title:"Item ID",field:"id",rowspan:2,align:"center",valign:"middle",sortable:true,footerFormatter:totalTextFormatter},{title:"Item Detail",colspan:3,align:"center"}],[{field:"name",title:"Item Name",sortable:true,editable:true,footerFormatter:totalNameFormatter,align:"center"},{field:"price",title:"Item Price",sortable:true,align:"center",editable:{type:"text",title:"Item Price",validate:function(f){f=$.trim(f);if(!f){return"This field is required"}if(!/^$/.test(f)){return"This field needs to start width $."}var d=$table.bootstrapTable("getData"),e=$(this).parents("tr").data("index");console.log(d[e]);return""}},footerFormatter:totalPriceFormatter},{field:"operate",title:"Item Operate",align:"center",events:operateEvents,formatter:operateFormatter}]]});setTimeout(function(){$table.bootstrapTable("resetView")},200);$table.on("check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table",function(){$remove.prop("disabled",!$table.bootstrapTable("getSelections").length);selections=getIdSelections()});$table.on("expand-row.bs.table",function(h,f,g,e){if(f%2==1){e.html("Loading from ajax request...");$.get("LICENSE",function(a){e.html(a.replace(/\n/g,"<br>"))})}});$table.on("all.bs.table",function(f,d,e){console.log(d,e)});$remove.click(function(){var b=getIdSelections();$table.bootstrapTable("remove",{field:"id",values:b});$remove.prop("disabled",true)});$(window).resize(function(){$table.bootstrapTable("resetView",{height:getHeight()})})}function getIdSelections(){return $.map($table.bootstrapTable("getSelections"),function(b){return b.id})}function responseHandler(b){$.each(b.rows,function(a,d){d.state=$.inArray(d.id,selections)!==-1});return b}function detailFormatter(e,f){var d=[];$.each(f,function(b,a){d.push("<p><b>"+b+":</b> "+a+"</p>")});return d.join("")}function operateFormatter(d,f,e){return['<a class="like" href="javascript:void(0)" title="Like">','<i class="glyphicon glyphicon-heart"></i>',"</a>  ",'<a class="remove" href="javascript:void(0)" title="Remove">','<i class="glyphicon glyphicon-remove"></i>',"</a>"].join("")}window.operateEvents={"click .like":function(h,e,g,f){alert("You click like action, row: "+JSON.stringify(g))},"click .remove":function(h,e,g,f){$table.bootstrapTable("remove",{field:"id",values:[g.id]})}};function totalTextFormatter(b){return"Total"}function totalNameFormatter(b){return b.length}function totalPriceFormatter(c){var d=0;$.each(c,function(b,a){d+=+(a.price.substring(1))});return"$"+d}function getHeight(){return $(window).height()-$("h1").outerHeight(true)}$(function(){var c=[location.search.substring(1)||"assets/bootstrap-table/src/bootstrap-table.js","assets/bootstrap-table/src/extensions/export/bootstrap-table-export.js","http://rawgit.com/hhurz/tableExport.jquery.plugin/master/tableExport.js","assets/bootstrap-table/src/extensions/editable/bootstrap-table-editable.js","http://rawgit.com/vitalets/x-editable/master/dist/bootstrap3-editable/js/bootstrap-editable.js"],d=function(j,b,a){a=a||function(){};if(!j.length){return a()}var h=0;var i=function(){b(j[h],function(e){if(e){a(e);a=function(){}}else{h+=1;if(h>=j.length){a(null)}else{i()}}})};i()};d(c,getScript,initTable)});function getScript(j,h){var i=document.getElementsByTagName("head")[0];var f=document.createElement("script");f.src=j;var g=false;f.onload=f.onreadystatechange=function(){if(!g&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){g=true;if(h){h()}f.onload=f.onreadystatechange=null}};i.appendChild(f);return undefined};