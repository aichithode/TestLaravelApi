var FormImageCrop=function(){var k=function(){$("#demo1").Jcrop()};var m=function(){var c;$("#demo2").Jcrop({onChange:a,onSelect:a,onRelease:b},function(){c=this});$("#coords").on("change","input",function(d){var g=$("#x1").val(),h=$("#x2").val(),e=$("#y1").val(),f=$("#y2").val();c.setSelect([g,e,h,f])});function a(d){$("#x1").val(d.x);$("#y1").val(d.y);$("#x2").val(d.x2);$("#y2").val(d.y2);$("#w").val(d.w);$("#h").val(d.h)}function b(){$("#coords input").val("")}};var n=function(){var j,b,c,f=$("#preview-pane"),a=$("#preview-pane .preview-container"),g=$("#preview-pane .preview-container img"),d=a.width(),e=a.height();console.log("init",[d,e]);$("#demo3").Jcrop({onChange:h,onSelect:h,aspectRatio:d/e},function(){var u=this.getBounds();b=u[0];c=u[1];j=this;f.appendTo(j.ui.holder)});function h(w){if(parseInt(w.w)>0){var x=d/w.w;var y=e/w.h;g.css({width:Math.round(x*b)+"px",height:Math.round(y*c)+"px",marginLeft:"-"+Math.round(x*w.x)+"px",marginTop:"-"+Math.round(y*w.y)+"px"})}}};var o=function(){var j;$("#demo4").Jcrop({bgFade:true,bgOpacity:0.2,setSelect:[60,70,540,330]},function(){j=this});$("#fadetog").change(function(){j.setOptions({bgFade:this.checked})}).attr("checked",true);App.updateUniform("#fadetog");$("#shadetog").change(function(){if(this.checked){$("#shadetxt").slideDown()}else{$("#shadetxt").slideUp()}j.setOptions({shade:this.checked})}).attr("checked",false);var a={bgc_buttons:"Change bgColor",bgo_buttons:"Change bgOpacity",anim_buttons:"Animate Selection"};var u={anim1:[217,122,382,284],anim2:[20,20,580,380],anim3:[24,24,176,376],anim4:[347,165,550,355],anim5:[136,55,472,183]};var d={Low:0.2,Mid:0.5,High:0.8,Full:1};var g={R:"#900",B:"#4BB6F0",Y:"#F0B207",G:"#46B81C",W:"white",K:"black"};for(i in a){f(i,a[i])}function c(t){var w=$("<button />").addClass("btn small");if(t){w.append(t)}return w}var e=1;for(i in u){$("#anim_buttons .btn-group").append(c(e++).click(h(u[i]))," ")}$("#anim_buttons .btn-group").append(c("Bye!").click(function(t){$(t.target).addClass("active");j.animateTo([300,200,300,200],function(){this.release();$(t.target).closest(".btn-group").find(".active").removeClass("active")});return false}));for(i in d){$("#bgo_buttons .btn-group").append(c(i).click(b("bgOpacity",d[i]))," ")}for(i in g){$("#bgc_buttons .btn-group").append(c(i).css({background:g[i],color:((i=="K")||(i=="R"))?"white":"black"}).click(b("bgColor",g[i]))," ")}function f(t,v){$("#interface").prepend($("<fieldset></fieldset>").attr("id",t).append($("<h4></h4>").append(v),'<div class="btn-toolbar"><div class="btn-group"></div></div>'))}function b(t,v){return function(w){$(w.target).closest(".btn-group").find(".active").removeClass("active");$(w.target).addClass("active");var y={};y[t]=v;j.setOptions(y);return false}}function h(t){return function(w){$(w.target).addClass("active");j.animateTo(t,function(){$(w.target).closest(".btn-group").find(".active").removeClass("active")});return false}}$("#bgo_buttons .btn:first,#bgc_buttons .btn:last").addClass("active");$("#interface").show()};var p=function(){var c;b();function b(){$(".requiresjcrop").hide();$("#demo5").Jcrop({onRelease:d},function(){c=this;c.animateTo([100,100,400,300]);$("#can_click,#can_move,#can_size").attr("checked","checked");App.updateUniform("#can_click,#can_move,#can_size");$("#ar_lock,#size_lock,#bg_swap").attr("checked",false);App.updateUniform("#ar_lock,#size_lock,#bg_swap");$(".requiresjcrop").show()})}function a(){var e=c.getBounds();return[Math.round(Math.random()*e[0]),Math.round(Math.random()*e[1]),Math.round(Math.random()*e[0]),Math.round(Math.random()*e[1])]}function d(){c.setOptions({allowSelect:true});$("#can_click").attr("checked",false);App.updateUniform("#can_click")}$("#setSelect").click(function(e){c.setSelect(a())});$("#animateTo").click(function(e){c.animateTo(a())});$("#release").click(function(e){c.release()});$("#disable").click(function(e){c.disable();$("#enable").show();$(".requiresjcrop").hide()});$("#enable").click(function(e){c.enable();$("#enable").hide();$(".requiresjcrop").show()});$("#rehook").click(function(e){$("#rehook,#enable").hide();b();$("#unhook,.requiresjcrop").show();return false});$("#unhook").click(function(e){c.destroy();$("#unhook,#enable,.requiresjcrop").hide();$("#rehook").show();return false});$("#img1").click(function(e){$(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active");c.setImage("../../assets/global/plugins/jcrop/demos/demo_files/sago.jpg");c.setOptions({bgOpacity:0.6});return false});$("#img2").click(function(e){$(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active");c.setImage("../../assets/global/plugins/jcrop/demos/demo_files/pool.jpg");c.setOptions({bgOpacity:0.6});return false});$("#img3").click(function(e){$(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active");c.setImage("../../assets/global/plugins/jcrop/demos/demo_files/sago.jpg",function(){this.setOptions({bgOpacity:1,outerImage:"../../assets/global/plugins/jcrop/demos/demo_files/sagomod.jpg"});this.animateTo(a())});return false});$("#can_click").change(function(e){c.setOptions({allowSelect:!!this.checked});c.focus()});$("#can_move").change(function(e){c.setOptions({allowMove:!!this.checked});c.focus()});$("#can_size").change(function(e){c.setOptions({allowResize:!!this.checked});c.focus()});$("#ar_lock").change(function(e){c.setOptions(this.checked?{aspectRatio:4/3}:{aspectRatio:0});c.focus()});$("#size_lock").change(function(e){c.setOptions(this.checked?{minSize:[80,80],maxSize:[350,350]}:{minSize:[0,0],maxSize:[0,0]});c.focus()})};var q=function(){var a;$("#demo6").Jcrop({bgOpacity:0.5,bgColor:"white",addClass:"jcrop-light"},function(){a=this;a.setSelect([130,65,130+350,65+285]);a.setOptions({bgFade:true});a.ui.selection.addClass("jcrop-selection")});$("#buttonbar").on("click","button",function(b){var d=$(this),c=d.closest(".btn-group");c.find("button.active").removeClass("active");d.addClass("active");c.find("[data-setclass]").each(function(){var f=$(this),e=f.data("setclass"),g=f.hasClass("active");if(g){a.ui.holder.addClass(e);switch(e){case"jcrop-light":a.setOptions({bgColor:"white",bgOpacity:0.5});break;case"jcrop-dark":a.setOptions({bgColor:"black",bgOpacity:0.4});break;case"jcrop-normal":a.setOptions({bgColor:$.Jcrop.defaults.bgColor,bgOpacity:$.Jcrop.defaults.bgOpacity});break}}else{a.ui.holder.removeClass(e)}})})};var r=function(){var a={x:13,y:7,x2:487,y2:107,w:474,h:100};$("#demo7").Jcrop({bgFade:true,setSelect:[a.x,a.y,a.x2,a.y2]})};var s=function(){$("#demo8").Jcrop({aspectRatio:1,onSelect:a});function a(b){$("#crop_x").val(b.x);$("#crop_y").val(b.y);$("#crop_w").val(b.w);$("#crop_h").val(b.h)}$("#demo8_form").submit(function(){if(parseInt($("#crop_w").val())){return true}alert("Please select a crop region then press submit.");return false})};var l=function(){if($(window).width()<=1024&&$(window).width()>=678){$(".responsive-1024").each(function(){$(this).attr("data-class",$(this).attr("class"));$(this).attr("class","responsive-1024 col-md-12")})}else{$(".responsive-1024").each(function(){if($(this).attr("data-class")){$(this).attr("class",$(this).attr("data-class"));$(this).removeAttr("data-class")}})}};return{init:function(){if(!jQuery().Jcrop){return}App.addResizeHandler(l);l();k();m();n();o();p();q();r();s()}}}();jQuery(document).ready(function(){FormImageCrop.init()});